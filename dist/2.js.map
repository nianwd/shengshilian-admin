{"version":3,"file":"2.js","sources":["webpack:///./src/views/goods/components/GoodsCategoryDetail.vue?4c4d","webpack:///./src/views/goods/components/GoodsCategoryDetail.vue?b4bf","webpack:///./src/views/goods/components/GoodsCategoryDetail.vue","webpack:///./src/views/goods/components/GoodsCategoryDetail.vue?f104","webpack:///./src/views/goods/components/GoodsCategoryDetail.vue?b63e"],"sourcesContent":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getGoodsCategory, createGoodsCategory, updateGoodsCategory, getCategorys as _getCategorys } from \"@/api/goods\";\nexport default {\n  name: \"GoodsCategoryDetail\",\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    },\n    is_self: {\n      type: Number,\n      default: 1\n    }\n  },\n  data: function data() {\n    return {\n      dialogImageUrl: \"\",\n      dialogVisible: false,\n      uploadImage: process.env.VUE_APP_BASE_API + \"/uploadImage\",\n      imgurl: \"\",\n      categorys: null,\n      ruleForm: {\n        pid: 0,\n        category_name: null,\n        img: null,\n        order: 1\n      },\n      rules: {\n        pid: [{\n          required: true,\n          message: \"请选择上级分类\",\n          trigger: \"change\"\n        }],\n        category_name: [{\n          required: true,\n          message: \"请输入商品名称\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  created: function created() {\n    console.log({\n      is_self: this.is_self\n    });\n    this.getCategorys(this.is_self);\n\n    if (this.isEdit) {\n      var id = this.$route.params && this.$route.params.id;\n      this.fetchData(id);\n    }\n  },\n  methods: {\n    getCategorys: function getCategorys(is_self) {\n      var _this = this;\n\n      var query = {\n        category_id: 0,\n        is_self: is_self\n      };\n      console.log({\n        query: query\n      });\n\n      _getCategorys(query).then(function (response) {\n        console.log(response);\n        _this.categorys = response.data;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    fetchData: function fetchData(id) {\n      var _this2 = this;\n\n      getGoodsCategory(id).then(function (response) {\n        _this2.ruleForm = response.data;\n        console.log(_this2.ruleForm);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    handleImgSuccess: function handleImgSuccess(res, file) {\n      console.log(res, file);\n\n      if (res.status_code === 200) {\n        this.imgurl = res.data.url;\n        this.ruleForm.img = res.data.path;\n      } else {\n        this.$message.error(\"上传失败!\");\n      }\n    },\n    beforeImgUpload: function beforeImgUpload(file) {\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n\n      return isLt2M;\n    },\n    submitForm: function submitForm(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this3.isEdit) {\n            var id = _this3.$route.params && _this3.$route.params.id;\n            _this3.ruleForm._method = \"put\";\n            updateGoodsCategory(id, _this3.ruleForm).then(function (response) {\n              console.log(response);\n\n              if (response.status_code === 200) {\n                _this3.$notify({\n                  title: \"成功\",\n                  message: response.message,\n                  type: \"success\",\n                  duration: 2000\n                });\n\n                _this3.$router.go(-1);\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          } else {\n            createGoodsCategory(_this3.ruleForm).then(function (response) {\n              console.log(response);\n\n              if (response.status_code === 200) {\n                _this3.$notify({\n                  title: \"成功\",\n                  message: response.message,\n                  type: \"success\",\n                  duration: 2000\n                });\n\n                _this3.$router.go(-1);\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          }\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"app-container\" },\n    [\n      _c(\n        \"el-form\",\n        {\n          ref: \"ruleForm\",\n          staticClass: \"demo-ruleForm\",\n          attrs: {\n            model: _vm.ruleForm,\n            rules: _vm.rules,\n            \"label-width\": \"100px\"\n          }\n        },\n        [\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"分类名称\", prop: \"category_name\" } },\n            [\n              _c(\"el-input\", {\n                model: {\n                  value: _vm.ruleForm.category_name,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"category_name\", $$v)\n                  },\n                  expression: \"ruleForm.category_name\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"上级分类\", prop: \"pid\" } },\n            [\n              _c(\n                \"el-select\",\n                {\n                  attrs: { placeholder: \"请选择上级分类\" },\n                  model: {\n                    value: _vm.ruleForm.pid,\n                    callback: function($$v) {\n                      _vm.$set(_vm.ruleForm, \"pid\", $$v)\n                    },\n                    expression: \"ruleForm.pid\"\n                  }\n                },\n                [\n                  _c(\"el-option\", { key: 0, attrs: { label: \"无\", value: 0 } }),\n                  _vm._v(\" \"),\n                  _vm._l(_vm.categorys, function(item) {\n                    return _c(\"el-option\", {\n                      key: item.category_id,\n                      attrs: {\n                        label: item.category_name,\n                        value: item.category_id\n                      }\n                    })\n                  })\n                ],\n                2\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"分类图片\" } },\n            [\n              _c(\n                \"el-upload\",\n                {\n                  staticClass: \"avatar-uploader\",\n                  attrs: {\n                    name: \"image\",\n                    action: _vm.uploadImage,\n                    \"show-file-list\": false,\n                    \"on-success\": _vm.handleImgSuccess,\n                    \"before-upload\": _vm.beforeImgUpload\n                  }\n                },\n                [\n                  _vm.ruleForm.img\n                    ? _c(\"img\", {\n                        staticClass: \"avatar\",\n                        attrs: {\n                          src: _vm.imgurl + _vm.ruleForm.img,\n                          width: \"200\"\n                        }\n                      })\n                    : _c(\"i\", {\n                        staticClass: \"el-icon-plus avatar-uploader-icon\"\n                      })\n                ]\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"排序\", prop: \"order\" } },\n            [\n              _c(\"el-input\", {\n                attrs: { placeholder: \"排序\" },\n                model: {\n                  value: _vm.ruleForm.order,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"order\", $$v)\n                  },\n                  expression: \"ruleForm.order\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            [\n              _c(\n                \"el-button\",\n                {\n                  attrs: { type: \"primary\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.submitForm(\"ruleForm\")\n                    }\n                  }\n                },\n                [_vm._v(\"确认\")]\n              )\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./GoodsCategoryDetail.vue?vue&type=template&id=6c530dbf&scoped=true&\"\nimport script from \"./GoodsCategoryDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./GoodsCategoryDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c530dbf\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\dev_project\\\\vue-project\\\\vue-element-admin\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6c530dbf')) {\n      api.createRecord('6c530dbf', component.options)\n    } else {\n      api.reload('6c530dbf', component.options)\n    }\n    module.hot.accept(\"./GoodsCategoryDetail.vue?vue&type=template&id=6c530dbf&scoped=true&\", function () {\n      api.rerender('6c530dbf', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/goods/components/GoodsCategoryDetail.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsCategoryDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsCategoryDetail.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"71dc64ac-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsCategoryDetail.vue?vue&type=template&id=6c530dbf&scoped=true&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClNA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvJA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}