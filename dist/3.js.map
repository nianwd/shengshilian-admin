{"version":3,"file":"3.js","sources":["webpack:///./src/views/goods/components/GoodsDetail.vue?7d10","webpack:///./src/views/goods/components/GoodsDetail.vue?bdfe","webpack:///./src/views/goods/components/GoodsDetail.vue","webpack:///./src/views/goods/components/GoodsDetail.vue?0595","webpack:///./src/views/goods/components/GoodsDetail.vue?6ff1"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getGoods, createGoods, updateGoods, getCategorys as _getCategorys } from \"@/api/goods\";\nexport default {\n  name: \"GoodsDetail\",\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      dialogImageUrl: \"\",\n      dialogVisible: false,\n      uploadImage: process.env.VUE_APP_BASE_API + \"/uploadImage\",\n      imgurl: \"\",\n      fileList: [],\n      categorys: null,\n      ruleForm: {\n        goods_name: null,\n        category_id: null,\n        main_img: null,\n        list_img: [],\n        goods_desc: null,\n        weight: null,\n        original_price: null,\n        price: null,\n        stock: 0,\n        is_up: 1,\n        is_hot: 0,\n        is_free_shipping: 0\n      },\n      rules: {\n        goods_name: [{\n          required: true,\n          message: \"请输入商品名称\",\n          trigger: \"blur\"\n        }],\n        category_id: [{\n          required: true,\n          message: \"请选择商品分类\",\n          trigger: \"change\"\n        }],\n        main_img: [{\n          required: true,\n          message: \"请上传商品主图\",\n          trigger: \"change\"\n        }],\n        goods_desc: [{\n          required: true,\n          message: \"请填写视频描述\",\n          trigger: \"change\"\n        }],\n        price: [{\n          required: true,\n          message: \"请填写商品价格\",\n          trigger: \"blur\"\n        }],\n        stock: [{\n          required: true,\n          message: \"请填写商品库存\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.getCategorys();\n\n    if (this.isEdit) {\n      var id = this.$route.params && this.$route.params.id;\n      this.fetchData(id);\n    }\n  },\n  methods: {\n    getCategorys: function getCategorys() {\n      var _this = this;\n\n      var query = {\n        category_id: 0,\n        is_self: 1\n      };\n\n      _getCategorys(query).then(function (response) {\n        console.log(response);\n        _this.categorys = response.data;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    fetchData: function fetchData(id) {\n      var _this2 = this;\n\n      getGoods(id).then(function (response) {\n        _this2.ruleForm = response.data;\n\n        if (_this2.ruleForm.list_img.length > 0) {\n          for (var index = 0; index < _this2.ruleForm.list_img.length; index++) {\n            var element = _this2.ruleForm.list_img[index];\n\n            _this2.fileList.push({\n              name: element,\n              url: element\n            });\n          }\n        }\n\n        console.log(_this2.ruleForm);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    onchange: function onchange(q) {\n      console.log(q);\n    },\n    handleRemove: function handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePictureCardPreview: function handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleListSuccess: function handleListSuccess(res, file) {\n      console.log(res, file);\n\n      if (res.status_code === 200) {\n        this.ruleForm.list_img.push(res.data.path);\n        console.log(this.ruleForm.list_img);\n      } else {\n        this.$message.error(\"上传失败!\");\n      }\n    },\n    handleMainSuccess: function handleMainSuccess(res, file) {\n      console.log(res, file);\n\n      if (res.status_code === 200) {\n        this.imgurl = res.data.url;\n        this.ruleForm.main_img = res.data.path;\n      } else {\n        this.$message.error(\"上传失败!\");\n      }\n    },\n    beforeMainUpload: function beforeMainUpload(file) {\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n\n      return isLt2M;\n    },\n    submitForm: function submitForm(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this3.isEdit) {\n            var id = _this3.$route.params && _this3.$route.params.id;\n            _this3.ruleForm._method = \"put\";\n            updateGoods(id, _this3.ruleForm).then(function (response) {\n              console.log(response);\n\n              if (response.status_code === 200) {\n                _this3.$notify({\n                  title: \"成功\",\n                  message: response.message,\n                  type: \"success\",\n                  duration: 2000\n                });\n\n                _this3.$router.go(-1);\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          } else {\n            createGoods(_this3.ruleForm).then(function (response) {\n              console.log(response);\n\n              if (response.status_code === 200) {\n                _this3.$notify({\n                  title: \"成功\",\n                  message: response.message,\n                  type: \"success\",\n                  duration: 2000\n                });\n\n                _this3.$router.go(-1);\n              }\n            }).catch(function (err) {\n              console.log(err);\n            });\n          }\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"app-container\" },\n    [\n      _c(\n        \"el-form\",\n        {\n          ref: \"ruleForm\",\n          staticClass: \"demo-ruleForm\",\n          attrs: {\n            model: _vm.ruleForm,\n            rules: _vm.rules,\n            \"label-width\": \"100px\"\n          }\n        },\n        [\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"商品名称\", prop: \"goods_name\" } },\n            [\n              _c(\"el-input\", {\n                model: {\n                  value: _vm.ruleForm.goods_name,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"goods_name\", $$v)\n                  },\n                  expression: \"ruleForm.goods_name\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"商品分类\", prop: \"category_id\" } },\n            [\n              _c(\n                \"el-select\",\n                {\n                  attrs: { placeholder: \"请选择商品分类\" },\n                  model: {\n                    value: _vm.ruleForm.category_id,\n                    callback: function($$v) {\n                      _vm.$set(_vm.ruleForm, \"category_id\", $$v)\n                    },\n                    expression: \"ruleForm.category_id\"\n                  }\n                },\n                _vm._l(_vm.categorys, function(item) {\n                  return _c(\"el-option\", {\n                    key: item.category_id,\n                    attrs: {\n                      label: item.category_name,\n                      value: item.category_id\n                    }\n                  })\n                }),\n                1\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"商品主图\" } },\n            [\n              _c(\n                \"el-upload\",\n                {\n                  staticClass: \"avatar-uploader\",\n                  attrs: {\n                    name: \"image\",\n                    action: _vm.uploadImage,\n                    \"show-file-list\": false,\n                    \"on-success\": _vm.handleMainSuccess,\n                    \"before-upload\": _vm.beforeMainUpload\n                  }\n                },\n                [\n                  _vm.ruleForm.main_img\n                    ? _c(\"img\", {\n                        staticClass: \"avatar\",\n                        attrs: {\n                          src: _vm.imgurl + _vm.ruleForm.main_img,\n                          width: \"200\"\n                        }\n                      })\n                    : _c(\"i\", {\n                        staticClass: \"el-icon-plus avatar-uploader-icon\"\n                      })\n                ]\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"商品组图\" } },\n            [\n              _c(\n                \"el-upload\",\n                {\n                  attrs: {\n                    action: _vm.uploadImage,\n                    name: \"image\",\n                    \"list-type\": \"picture-card\",\n                    \"file-list\": _vm.fileList,\n                    \"on-preview\": _vm.handlePictureCardPreview,\n                    \"on-success\": _vm.handleListSuccess,\n                    \"on-remove\": _vm.handleRemove,\n                    limit: 6\n                  }\n                },\n                [_c(\"i\", { staticClass: \"el-icon-plus\" })]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"el-dialog\",\n                {\n                  attrs: { visible: _vm.dialogVisible },\n                  on: {\n                    \"update:visible\": function($event) {\n                      _vm.dialogVisible = $event\n                    }\n                  }\n                },\n                [\n                  _c(\"img\", {\n                    attrs: { width: \"100%\", src: _vm.dialogImageUrl, alt: \"\" }\n                  })\n                ]\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"商品描述\", prop: \"goods_desc\" } },\n            [\n              _c(\"el-input\", {\n                attrs: { type: \"textarea\" },\n                model: {\n                  value: _vm.ruleForm.goods_desc,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"goods_desc\", $$v)\n                  },\n                  expression: \"ruleForm.goods_desc\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"重量\", prop: \"weight\" } },\n            [\n              _c(\"el-input\", {\n                attrs: { size: \"medium\" },\n                model: {\n                  value: _vm.ruleForm.weight,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"weight\", $$v)\n                  },\n                  expression: \"ruleForm.weight\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"原价\", prop: \"original_price\" } },\n            [\n              _c(\"el-input\", {\n                attrs: { type: \"\", size: \"medium\" },\n                model: {\n                  value: _vm.ruleForm.original_price,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"original_price\", $$v)\n                  },\n                  expression: \"ruleForm.original_price\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"价格\", prop: \"price\" } },\n            [\n              _c(\"el-input\", {\n                attrs: { size: \"medium\" },\n                model: {\n                  value: _vm.ruleForm.price,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"price\", $$v)\n                  },\n                  expression: \"ruleForm.price\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"库存\", prop: \"stock\" } },\n            [\n              _c(\"el-input\", {\n                attrs: { size: \"medium\" },\n                model: {\n                  value: _vm.ruleForm.stock,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"stock\", $$v)\n                  },\n                  expression: \"ruleForm.stock\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"上下架\", prop: \"is_up\" } },\n            [\n              _c(\"el-switch\", {\n                attrs: { \"active-value\": 1, \"inactive-value\": 0 },\n                on: { change: _vm.onchange },\n                model: {\n                  value: _vm.ruleForm.is_up,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"is_up\", $$v)\n                  },\n                  expression: \"ruleForm.is_up\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"包邮\", prop: \"is_free_shipping\" } },\n            [\n              _c(\"el-switch\", {\n                attrs: { \"active-value\": 1, \"inactive-value\": 0 },\n                model: {\n                  value: _vm.ruleForm.is_free_shipping,\n                  callback: function($$v) {\n                    _vm.$set(_vm.ruleForm, \"is_free_shipping\", $$v)\n                  },\n                  expression: \"ruleForm.is_free_shipping\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-form-item\",\n            [\n              _c(\n                \"el-button\",\n                {\n                  attrs: { type: \"primary\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.submitForm(\"ruleForm\")\n                    }\n                  }\n                },\n                [_vm._v(\"发布\")]\n              )\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./GoodsDetail.vue?vue&type=template&id=96b15bbe&scoped=true&\"\nimport script from \"./GoodsDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./GoodsDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"96b15bbe\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\dev_project\\\\vue-project\\\\vue-element-admin\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('96b15bbe')) {\n      api.createRecord('96b15bbe', component.options)\n    } else {\n      api.reload('96b15bbe', component.options)\n    }\n    module.hot.accept(\"./GoodsDetail.vue?vue&type=template&id=96b15bbe&scoped=true&\", function () {\n      api.rerender('96b15bbe', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/goods/components/GoodsDetail.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsDetail.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"71dc64ac-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsDetail.vue?vue&type=template&id=96b15bbe&scoped=true&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5RA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzSA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}